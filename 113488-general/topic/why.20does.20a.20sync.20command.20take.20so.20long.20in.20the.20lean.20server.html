---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/why.20does.20a.20sync.20command.20take.20so.20long.20in.20the.20lean.20server.html
---

<h2>Stream: <a href="http://robertylewis.com/website_test/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="http://robertylewis.com/website_test/stream/113488-general/topic/why.20does.20a.20sync.20command.20take.20so.20long.20in.20the.20lean.20server.html">why does a sync command take so long in the lean server</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="195131227"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/why%20does%20a%20sync%20command%20take%20so%20long%20in%20the%20lean%20server/near/195131227" class="zl"><img src="http://robertylewis.com/website_test/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Rute <a href="http://robertylewis.com/website_test/stream/113488-general/topic/why.20does.20a.20sync.20command.20take.20so.20long.20in.20the.20lean.20server.html#195131227">(Apr 23 2020 at 23:21)</a>:</h4>
<p>In the lean server, if you send a sync command, e.g. even a one line file, and wait for the server to finish syncing (i.e. wait for a a current tasks response with no tasks), it will take about 0.2 seconds.  Why?  That seems really long in computer time.  Is it intentional?</p>



<a name="195132285"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/why%20does%20a%20sync%20command%20take%20so%20long%20in%20the%20lean%20server/near/195132285" class="zl"><img src="http://robertylewis.com/website_test/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Rute <a href="http://robertylewis.com/website_test/stream/113488-general/topic/why.20does.20a.20sync.20command.20take.20so.20long.20in.20the.20lean.20server.html#195132285">(Apr 23 2020 at 23:38)</a>:</h4>
<p>To be more specific, if you send, say,</p>
<div class="codehilite"><pre><span></span><span class="p">{</span><span class="nt">&quot;command&quot;</span><span class="p">:</span> <span class="s2">&quot;sync&quot;</span><span class="p">,</span> <span class="nt">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;#eval 1&quot;</span><span class="p">,</span> <span class="nt">&quot;file_name&quot;</span><span class="p">:</span> <span class="s2">&quot;/test.lean&quot;</span><span class="p">,</span> <span class="nt">&quot;seq_num&quot;</span><span class="p">:</span> <span class="mi">100</span><span class="p">}</span>
</pre></div>


<p>then the time it takes to get back</p>
<div class="codehilite"><pre><span></span><span class="p">{</span><span class="nt">&quot;message&quot;</span><span class="p">:</span><span class="s2">&quot;file invalidated&quot;</span><span class="p">,</span><span class="nt">&quot;response&quot;</span><span class="p">:</span><span class="s2">&quot;ok&quot;</span><span class="p">,</span><span class="nt">&quot;seq_num&quot;</span><span class="p">:</span><span class="mi">100</span><span class="p">}</span>
<span class="p">{</span><span class="nt">&quot;is_running&quot;</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="nt">&quot;response&quot;</span><span class="p">:</span><span class="s2">&quot;current_tasks&quot;</span><span class="p">,</span><span class="nt">&quot;tasks&quot;</span><span class="p">:[]}</span>
</pre></div>


<p>is about .2 seconds.  (This is assuming you have already warmed up the server by sending it many requests.)</p>



{% endraw %}

<hr><p>Last updated: Apr 24 2020 at 00:02 UTC</p>